#!/usr/bin/env ruby
# vim: set ft=ruby:

STDOUT.sync = STDERR.sync = true

begin
  require 'rubygems'
  require 'bundler'
  require 'bundler/setup'
rescue LoadError => e
  STDERR.puts e.message
end

require 'socket'
require_relative '../lib/gorack_server'

# descriptor inherited from parent process
master_sock = UNIXSocket.for_fd(3)

Gorack::Server.run(master_sock, ARGV[0])
